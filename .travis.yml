language: python
cache:
  directories:
    - $HOME/.cache/pip
python:
- "2.7"
- "3.5"
- "pypy-5.4.1"
- "pypy3.3-5.2-alpha1"
matrix:
  allow_failures:
  - python: "pypy-5.4.1"
  - python: "pypy3.3-5.2-alpha1"
dist: trusty
sudo: false
addons:
  apt:
    packages:
    - libgeoip-dev
install:
  - pip install -e .[testing]
script: pytest --cov=cms -n auto --create-db --nomigrations
notifications:
  slack:
    rooms: onespacemedia:NufeDxb1m4D0UkuQh1O0m9qt#builds
    on_success: change
    on_failure: always
  email: false
after_success:
  - coveralls
